<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Predmachlearn : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Predmachlearn</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/hekang91/PredMachLearn">View on GitHub</a>

          <h1 id="project_title">Predmachlearn</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/hekang91/PredMachLearn/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/hekang91/PredMachLearn/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>&lt;!DOCTYPE html&gt;</p>

<p></p>

<p></p>

<p>

</p>

<p></p>Practical Machine Learning



<p>

</p>



code{white-space: pre;}

<p></p>




  pre:not([class]) {
    background-color: white;
  }




<p></p>

<p></p>


.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}


<div>


<div id="header">
<h1>
<a id="practical-machine-learning" class="anchor" href="#practical-machine-learning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Practical Machine Learning</h1>
</div>

<div id="read-the-raw-data-and-load-the-r-packages">
<h2>
<a id="read-the-raw-data-and-load-the-r-packages" class="anchor" href="#read-the-raw-data-and-load-the-r-packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read the raw data and load the R packages</h2>
<p>The data came from this source: <a href="http://groupware.les.inf.puc-rio.br/har">http://groupware.les.inf.puc-rio.br/har</a>.</p>
<pre><code>data_raw_training &lt;- read.csv("pml-training.csv")
data_raw_testing &lt;- read.csv("pml-testing.csv")
library(caret)</code></pre>
<pre><code>## Loading required package: lattice
## Loading required package: ggplot2</code></pre>
<pre><code>library(randomForest)</code></pre>
<pre><code>## randomForest 4.6-10
## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>set.seed(33833)</code></pre>
</div>

<div id="select-the-predictors">
<h2>
<a id="select-the-predictors" class="anchor" href="#select-the-predictors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Select the predictors</h2>
<p>I selected the variables as the predictors of my model based on: 1) the values of the variables were not NA; 2) the variables were collected from accelerometers on the belt, forearm, arm, and dumbell.</p>
<pre><code>predictor_list = names(data_raw_testing[,colSums(is.na(data_raw_testing)) != nrow(data_raw_testing)])
predictor_list = predictor_list[grep('belt|arm|dumbbell|forearm',predictor_list)]
predictor_list</code></pre>
<pre><code>##  [1] "roll_belt"            "pitch_belt"           "yaw_belt"            
##  [4] "total_accel_belt"     "gyros_belt_x"         "gyros_belt_y"        
##  [7] "gyros_belt_z"         "accel_belt_x"         "accel_belt_y"        
## [10] "accel_belt_z"         "magnet_belt_x"        "magnet_belt_y"       
## [13] "magnet_belt_z"        "roll_arm"             "pitch_arm"           
## [16] "yaw_arm"              "total_accel_arm"      "gyros_arm_x"         
## [19] "gyros_arm_y"          "gyros_arm_z"          "accel_arm_x"         
## [22] "accel_arm_y"          "accel_arm_z"          "magnet_arm_x"        
## [25] "magnet_arm_y"         "magnet_arm_z"         "roll_dumbbell"       
## [28] "pitch_dumbbell"       "yaw_dumbbell"         "total_accel_dumbbell"
## [31] "gyros_dumbbell_x"     "gyros_dumbbell_y"     "gyros_dumbbell_z"    
## [34] "accel_dumbbell_x"     "accel_dumbbell_y"     "accel_dumbbell_z"    
## [37] "magnet_dumbbell_x"    "magnet_dumbbell_y"    "magnet_dumbbell_z"   
## [40] "roll_forearm"         "pitch_forearm"        "yaw_forearm"         
## [43] "total_accel_forearm"  "gyros_forearm_x"      "gyros_forearm_y"     
## [46] "gyros_forearm_z"      "accel_forearm_x"      "accel_forearm_y"     
## [49] "accel_forearm_z"      "magnet_forearm_x"     "magnet_forearm_y"    
## [52] "magnet_forearm_z"</code></pre>
<pre><code>data_refined_training = data.frame(data_raw_training$classe,data_raw_training[,predictor_list])</code></pre>
</div>

<div id="split-the-data-into-training-set-60-and-cross-validation-set-40">
<h2>
<a id="split-the-data-into-training-set-60-and-cross-validation-set-40" class="anchor" href="#split-the-data-into-training-set-60-and-cross-validation-set-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Split the data into training set (60%) and cross validation set (40%)</h2>
<pre><code>trainIndex = createDataPartition(data_refined_training$data_raw_training.classe, p = 0.60,list=FALSE)
training = data_refined_training[trainIndex,]
crossVal = data_refined_training[-trainIndex,]</code></pre>
</div>

<div id="fit-the-random-forest-model">
<h2>
<a id="fit-the-random-forest-model" class="anchor" href="#fit-the-random-forest-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fit the random forest model</h2>
<p>I used the function trainControl to customize the amount of bootstrap for reducing the demand on the computer. On this specific case bootstrap was not improving accuracy of the model at all. Thus I set the amount of bootstrap at 1. This method was referred to the thread from the discussion forum posted by Francisco Jaramillo.</p>
<pre><code>ctrl = trainControl(method='boot',number=1)
modelFit &lt;- train(training$data_raw_training.classe~. ,method='rf',data=training,trControl=ctrl)</code></pre>
</div>

<div id="check-the-results-for-training-set">
<h2>
<a id="check-the-results-for-training-set" class="anchor" href="#check-the-results-for-training-set" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check the results for training set</h2>
<p>The overall accuracy was 100% for the training set which meant the model fit our data well.</p>
<pre><code>predTrain &lt;- predict(modelFit,training)
confusionMatrix(training$data_raw_training.classe,predTrain)</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 3348    0    0    0    0
##          B    0 2279    0    0    0
##          C    0    0 2054    0    0
##          D    0    0    0 1930    0
##          E    0    0    0    0 2165
## 
## Overall Statistics
##                                      
##                Accuracy : 1          
##                  95% CI : (0.9997, 1)
##     No Information Rate : 0.2843     
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16  
##                                      
##                   Kappa : 1          
##  Mcnemar's Test P-Value : NA         
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            1.0000   1.0000   1.0000   1.0000   1.0000
## Specificity            1.0000   1.0000   1.0000   1.0000   1.0000
## Pos Pred Value         1.0000   1.0000   1.0000   1.0000   1.0000
## Neg Pred Value         1.0000   1.0000   1.0000   1.0000   1.0000
## Prevalence             0.2843   0.1935   0.1744   0.1639   0.1838
## Detection Rate         0.2843   0.1935   0.1744   0.1639   0.1838
## Detection Prevalence   0.2843   0.1935   0.1744   0.1639   0.1838
## Balanced Accuracy      1.0000   1.0000   1.0000   1.0000   1.0000</code></pre>
</div>

<div id="estimate-the-out-of-sample-error-with-cross-validation">
<h2>
<a id="estimate-the-out-of-sample-error-with-cross-validation" class="anchor" href="#estimate-the-out-of-sample-error-with-cross-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Estimate the out of sample error with cross-validation</h2>
<p>The overall accuracy was 99.3% for the cross-validation set, that is, the out of sample error was 0.7%.</p>
<pre><code>predCrossVal &lt;- predict(modelFit,crossVal)
confusionMatrix(crossVal$data_raw_training.classe,predCrossVal)</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 2228    3    1    0    0
##          B   11 1503    4    0    0
##          C    0    6 1358    4    0
##          D    0    0   14 1271    1
##          E    0    0    1   11 1430
## 
## Overall Statistics
##                                           
##                Accuracy : 0.9929          
##                  95% CI : (0.9907, 0.9946)
##     No Information Rate : 0.2854          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.991           
##  Mcnemar's Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            0.9951   0.9940   0.9855   0.9883   0.9993
## Specificity            0.9993   0.9976   0.9985   0.9977   0.9981
## Pos Pred Value         0.9982   0.9901   0.9927   0.9883   0.9917
## Neg Pred Value         0.9980   0.9986   0.9969   0.9977   0.9998
## Prevalence             0.2854   0.1927   0.1756   0.1639   0.1824
## Detection Rate         0.2840   0.1916   0.1731   0.1620   0.1823
## Detection Prevalence   0.2845   0.1935   0.1744   0.1639   0.1838
## Balanced Accuracy      0.9972   0.9958   0.9920   0.9930   0.9987</code></pre>
</div>

<div id="predict-20-different-test-cases">
<h2>
<a id="predict-20-different-test-cases" class="anchor" href="#predict-20-different-test-cases" aria-hidden="true"><span class="octicon octicon-link"></span></a>Predict 20 different test cases</h2>
<pre><code>data_refined_testing = data.frame(data_raw_testing[,predictor_list])
answers &lt;- predict(modelFit,data_refined_testing)
answers</code></pre>
<pre><code>##  [1] B A B A A E D B A A B C B A E E A B B B
## Levels: A B C D E</code></pre>
</div>

<p></p>
</div>







<p>
</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Predmachlearn maintained by <a href="https://github.com/hekang91">hekang91</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
